diff -ruN old/CHANGELOG new/CHANGELOG
--- old/CHANGELOG	2024-12-02 15:16:24.000000000 +0000
+++ new/CHANGELOG	2025-01-04 18:04:39.000000000 +0000
@@ -1,6 +1,10 @@
+0.6o
+Fixed Daily Rob
+Updated to latest version of FatFree (3.9)
+
 0.6n
 Updated to latest version of CKEditor 4.22.1
-Removed insecure blog info page which
+Removed insecure blog info page
 
 0.6m
 Updated to latest version of FatFree (3.8.2)
diff -ruN old/composer.json new/composer.json
--- old/composer.json	2024-12-02 15:16:24.000000000 +0000
+++ new/composer.json	2025-01-04 18:00:21.000000000 +0000
@@ -1,5 +1,5 @@
 {
     "require": {
-        "bcosca/fatfree": "^3.8"
+        "bcosca/fatfree": "^3.9"
     }
 }
diff -ruN old/docker-compose.yaml new/docker-compose.yaml
--- old/docker-compose.yaml	1970-01-01 01:00:00.000000000 +0100
+++ new/docker-compose.yaml	2024-12-16 11:27:22.000000000 +0000
@@ -0,0 +1,28 @@
+services:
+  db:
+    image: mariadb
+    volumes:
+      - ./install.sql:/docker-entrypoint-initdb.d/install.sql
+    environment:
+      MARIADB_ROOT_PASSWORD: WeLoveRob
+      MARIADB_DATABASE: <TeamUsername>
+      MARIADB_USER: <TeamUsername>
+      MARIADB_PASSWORD: <TeamPassword>
+
+  robpress:
+    build: .
+    image: robpress
+    ports:
+      - "3000:80"
+    container_name: robpress 
+    volumes:
+      - ./:/var/www/html
+
+  pma:
+    image: phpmyadmin 
+    ports:
+      - "4000:80"
+    container_name: pma
+    environment:
+      PMA_USER: root
+      PMA_PASSWORD: WeLoveRob
diff -ruN old/Dockerfile new/Dockerfile
--- old/Dockerfile	1970-01-01 01:00:00.000000000 +0100
+++ new/Dockerfile	2024-12-16 11:27:20.000000000 +0000
@@ -0,0 +1,3 @@
+FROM php:8.2-apache
+RUN a2enmod rewrite
+RUN docker-php-ext-install pdo_mysql
diff -ruN old/vendor/autoload.php new/vendor/autoload.php
--- old/vendor/autoload.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/autoload.php	2025-01-04 18:03:14.000000000 +0000
@@ -2,6 +2,24 @@
 
 // autoload.php @generated by Composer
 
+if (PHP_VERSION_ID < 50600) {
+    if (!headers_sent()) {
+        header('HTTP/1.1 500 Internal Server Error');
+    }
+    $err = 'Composer 2.3.0 dropped support for autoloading on PHP <5.6 and you are running '.PHP_VERSION.', please upgrade PHP or use Composer 2.2 LTS via "composer self-update --2.2". Aborting.'.PHP_EOL;
+    if (!ini_get('display_errors')) {
+        if (PHP_SAPI === 'cli' || PHP_SAPI === 'phpdbg') {
+            fwrite(STDERR, $err);
+        } elseif (!headers_sent()) {
+            echo $err;
+        }
+    }
+    trigger_error(
+        $err,
+        E_USER_ERROR
+    );
+}
+
 require_once __DIR__ . '/composer/autoload_real.php';
 
 return ComposerAutoloaderInit043cbf4ae0508c49f665d1a5973c08c0::getLoader();
diff -ruN old/vendor/bcosca/fatfree/readme.md new/vendor/bcosca/fatfree/readme.md
--- old/vendor/bcosca/fatfree/readme.md	2024-12-02 15:16:22.000000000 +0000
+++ new/vendor/bcosca/fatfree/readme.md	2024-12-29 16:02:38.000000000 +0000
@@ -1,10 +1,8 @@
-[![Fat-Free Framework](ui/images/logo.png)](http://fatfree.sf.net/)
+[![Fat-Free Framework](ui/images/logo.png)](https://github.com/bcosca/fatfree)
 
 **A powerful yet easy-to-use PHP micro-framework designed to help you build dynamic and robust Web applications - fast!**
 
-[![Flattr this project](https://api.flattr.com/button/flattr-badge-large.png)](https://flattr.com/submit/auto?user_id=phpfatfree&url=https://github.com/bcosca/fatfree)
-
-Condensed in a single ~65KB file, F3 (as we fondly call it) gives you solid foundation, a mature code base, and a no-nonsense approach to writing Web applications. Under the hood is an easy-to-use Web development tool kit, a high-performance URL routing and cache engine, built-in code highlighting, and support for multilingual applications. It's lightweight, easy-to-use, and fast. Most of all, it doesn't get in your way.
+Condensed in a single file, F3 (as we fondly call it) gives you solid foundation, a mature code base, and a no-nonsense approach to writing Web applications. Under the hood is an easy-to-use Web development tool kit, a high-performance URL routing and cache engine, built-in code highlighting, and support for multilingual applications. It's lightweight, easy-to-use, and fast. Most of all, it doesn't get in your way.
 
 Whether you're a novice or an expert PHP programmer, F3 will get you up and running in no time. No unnecessary and painstaking installation procedures. No complex configuration required. No convoluted directory structures. There's no better time to start developing Web applications the easy way than right now!
 
@@ -32,12 +30,8 @@
 
 Unlike other frameworks, F3 aims to be usable - not usual.
 
-[![Flattr this project](https://api.flattr.com/button/flattr-badge-large.png)](https://flattr.com/submit/auto?user_id=phpfatfree&url=https://github.com/bcosca/fatfree)
-
 The philosophy behind the framework and its approach to software architecture is towards minimalism in structural components, avoiding application complexity and striking a balance between code elegance, application performance and programmer productivity.
 
-[![Paypal](ui/images/paypal.png)](https://www.paypal.me/fatfree)
-
 ## Table of Contents
 
 * [Getting Started](#getting-started)
@@ -51,8 +45,6 @@
 * [Quick Reference](#quick-reference)
 * [Support and Licensing](#support-and-licensing)
 
-[![Twitter](ui/images/twitter.png)](https://twitter.com/phpfatfree)
-
 ### Get the latest release!
 
 F3 has a stable enterprise-class architecture. Unbeatable performance, user-friendly features and a lightweight footprint. What more can you ask for?
@@ -96,17 +88,14 @@
 PHP will let you know which particular version you're running and you should get something that looks similar to this:-
 
 ```
-PHP 7.4.21 (cli) (built: Jul 27 2021 15:56:07) ( NTS )
+PHP 8.3.11 (cli) (built: Aug 30 2024 20:21:32) (NTS)
 Copyright (c) The PHP Group
-Zend Engine v3.4.0, Copyright (c) Zend Technologies
-    with Xdebug v2.9.8, Copyright (c) 2002-2020, by Derick Rethans
+Zend Engine v4.3.11, Copyright (c) Zend Technologies
+    with Xdebug v3.3.2, Copyright (c) 2002-2024, by Derick Rethans
 ```
 
-Upgrade if necessary and come back here if you've made the jump to PHP 7.4 or a later release. Fatfree needs at least PHP 7.2 to function. If you need a hosting service provider, try one of these services:
+Upgrade if necessary and come back here if you've made the jump to PHP 8.0 or a later release. Fat-Free needs at least PHP 7.2 as minimum version to function.
 
-* [DreamHost](http://www.dreamhost.com/r.cgi?665472)
-* [Hostek](http://hostek.com/aff.php?aff=364&plat=L)
-* [SiteGround](http://www.siteground.com/index.htm?referrerid=155694)
 
 ### Hello, World: The Less-Than-A-Minute Fat-Free Recipe
 
@@ -2450,7 +2439,7 @@
 
 ## Support and Licensing
 
-Technical support is available at the official discussion forum: [`https://groups.google.com/forum/#!forum/f3-framework`](https://groups.google.com/forum/#!forum/f3-framework). If you need live support, you can talk to the development team and other members of the F3 community via [Slack](https://fatfreeframework-slack.herokuapp.com/) or IRC. We're on the FreeNode `#fatfree` channel (`chat.freenode.net`). Visit [`http://webchat.freenode.net/`](http://webchat.freenode.net/) to join the conversation. You can also download the [Firefox Chatzilla](https://addons.mozilla.org/en-US/firefox/addon/chatzilla/) add-on or [Pidgin](http://www.pidgin.im/) if you don't have an IRC client so you can participate in the live chat.
+Technical support is available at the official discussion forum: [`https://groups.google.com/forum/#!forum/f3-framework`](https://groups.google.com/forum/#!forum/f3-framework). If you need live support, you can talk to the development team and other members of the F3 community via [Matrix](https://matrix.to/#/#fat-free-framework:matrix.org).
 You can also find help at [Stack Overflow](http://stackoverflow.com/questions/tagged/fat-free-framework)
 
 ### Nightly Builds
@@ -2458,12 +2447,12 @@
 F3 uses Git for version control. To clone the latest code repository on GitHub:
 
 ``` bash
-git clone git://github.com/bcosca/fatfree-core.git
+git clone https://github.com/f3-factory/fatfree-core.git
 ```
 
-If all you want is a zipball of our test bench with all unit tests, grab it [**here**](https://github.com/bcosca/fatfree/archive/dev.zip).
+If all you want is a test bench with all unit tests, grab it [**here**](https://github.com/f3-factory/fatfree-dev).
 
-To file a bug report, visit [`https://github.com/bcosca/fatfree-core/issues`](https://github.com/bcosca/fatfree-core/issues).
+To file a bug report, visit [`https://github.com/f3-factory/fatfree-core/issues`](https://github.com/f3-factory/fatfree-core/issues).
 
 ### Fair Licensing
 
@@ -2602,15 +2591,8 @@
 
 Special thanks to the selfless others who expressed their desire to remain anonymous, yet share their time, contribute code, send donations, promote the framework to a wider audience, as well as provide encouragement and regular financial assistance. Their generosity is F3's prime motivation.
 
-[![Paypal](ui/images/paypal.png)](https://www.paypal.me/fatfree)
-
 ### Legal notice
 
 By making a donation to this project you signify that you acknowledged, understood, accepted, and agreed to the terms and conditions contained in this notice. Your donation to the Fat-Free Framework project is voluntary and is not a fee for any services, goods, or advantages, and making a donation to the project does not entitle you to any services, goods, or advantages. We have the right to use the money you donate to the Fat-Free Framework project in any lawful way and for any lawful purpose we see fit and we are not obligated to disclose the way and purpose to any party unless required by applicable law. Although Fat-Free Framework is free software, to our best knowledge this project does not have any tax-exempt status. The Fat-Free Framework project is neither a registered non-profit corporation nor a registered charity in any country. Your donation may or may not be tax-deductible; please consult this with your tax advisor. We will not publish/disclose your name and e-mail address without your consent, unless required by applicable law. Your donation is non-refundable.
 
-**Copyright (c) 2009-2022 F3::Factory/Bong Cosca &lt;bong&#46;cosca&#64;yahoo&#46;com&gt;**
-
-## Support on Beerpay
-Hey dude! Help me out for a couple of :beers:!
-
-[![Beerpay](https://beerpay.io/bcosca/fatfree/badge.svg?style=beer-square)](https://beerpay.io/bcosca/fatfree)  [![Beerpay](https://beerpay.io/bcosca/fatfree/make-wish.svg?style=flat-square)](https://beerpay.io/bcosca/fatfree?focus=wish)
+**Copyright (c) 2009-2025 F3::Factory**
Binary files old/vendor/bcosca/fatfree/ui/images/paypal.png and new/vendor/bcosca/fatfree/ui/images/paypal.png differ
Binary files old/vendor/bcosca/fatfree/ui/images/twitter.png and new/vendor/bcosca/fatfree/ui/images/twitter.png differ
diff -ruN old/vendor/bcosca/fatfree/ui/welcome.htm new/vendor/bcosca/fatfree/ui/welcome.htm
--- old/vendor/bcosca/fatfree/ui/welcome.htm	2024-12-02 15:16:22.000000000 +0000
+++ new/vendor/bcosca/fatfree/ui/welcome.htm	2024-12-29 16:02:38.000000000 +0000
@@ -53,10 +53,9 @@
 	<p>If you feel that this software is one great weapon to have in your programming arsenal, it saves you a lot of time and money, use it for commercial gain or in your business organization, please consider making a donation to the project. A significant amount of time, effort, and money has been spent on this project. Your donations help keep this project alive and the development team motivated. Donors and sponsors get priority support commensurate to your contribution (24-hour response time on business days).</p>
 	<h2>Support F3</h2>
 	<p>F3 is community-driven software. Support the development of the Fat-Free Framework. Your contributions help keep this project alive.</p>
-	<p class="center"><a href="https://www.paypal.me/fatfree" target="_blank"><img src="ui/images/paypal.png"></a></p>
 </div>
 <div class="footer center">
 	<p>Fat-Free Framework is licensed under the terms of the GPL, either v3 or later<br>
-	Copyright &copy; 2009-2017 F3::Factory/Bong Cosca &lt;bong&#46;cosca&#64;yahoo&#46;com&gt;</p>
+	Copyright &copy; 2009-2025 F3::Factory/Bong Cosca &lt;bong&#46;cosca&#64;yahoo&#46;com&gt;</p>
 	<p class="stats"><code><?php echo Base::instance()->format('Page rendered in {0} msecs / Memory usage {1} Kibytes',round(1e3*(microtime(TRUE)-$TIME),2),round(memory_get_usage(TRUE)/1e3,1)); ?></code></p>
 </div>
diff -ruN old/vendor/bcosca/fatfree-core/audit.php new/vendor/bcosca/fatfree-core/audit.php
--- old/vendor/bcosca/fatfree-core/audit.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/audit.php	2024-12-31 17:11:04.000000000 +0000
@@ -77,8 +77,8 @@
 	*	@param $addr string
 	**/
 	function isprivate($addr) {
-		return !(bool)filter_var($addr,FILTER_VALIDATE_IP,
-			FILTER_FLAG_IPV4|FILTER_FLAG_IPV6|FILTER_FLAG_NO_PRIV_RANGE);
+		return (bool)filter_var($addr, FILTER_VALIDATE_IP, FILTER_FLAG_IPV4 | FILTER_FLAG_IPV6)
+			&& !(bool)filter_var($addr, FILTER_VALIDATE_IP, FILTER_FLAG_NO_PRIV_RANGE);
 	}
 
 	/**
@@ -189,4 +189,14 @@
 				'/[A-Z].*?[0-9[:punct:]]|[0-9[:punct:]].*?[A-Z]/',$str));
 	}
 
+    /**
+     *	Return TRUE if string is a valid MAC address including EUI-64 format
+     *	@return bool
+     *	@param $addr string
+     **/
+    function mac($addr) {
+        return (bool)filter_var($addr,FILTER_VALIDATE_MAC)
+            || preg_match('/^([0-9a-f]{2}:){3}ff:fe(:[0-9a-f]{2}){3}$/i', $addr);
+    }
+
 }
diff -ruN old/vendor/bcosca/fatfree-core/auth.php new/vendor/bcosca/fatfree-core/auth.php
--- old/vendor/bcosca/fatfree-core/auth.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/auth.php	2024-12-31 17:11:04.000000000 +0000
@@ -247,7 +247,7 @@
 	*	@param $args array
 	*	@param $func callback
 	**/
-	function __construct($storage,array $args=NULL,$func=NULL) {
+	function __construct($storage,?array $args=NULL,$func=NULL) {
 		if (is_object($storage) && is_a($storage,'DB\Cursor')) {
 			$this->storage=$storage->dbtype();
 			$this->mapper=$storage;
diff -ruN old/vendor/bcosca/fatfree-core/base.php new/vendor/bcosca/fatfree-core/base.php
--- old/vendor/bcosca/fatfree-core/base.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/base.php	2024-12-31 17:11:04.000000000 +0000
@@ -38,14 +38,88 @@
 	}
 
 }
-
+/**
+ * @property string ALIAS
+ * @property array ALIASES
+ * @property string|array AUTOLOAD
+ * @property bool|string CACHE
+ * @property bool CASELESS
+ * @property callable|\Prefab|\Psr\Container\ContainerInterface CONTAINER
+ * @property array COOKIE
+ * @property array GET
+ * @property array POST
+ * @property array REQUEST
+ * @property array SESSION
+ * @property array FILES
+ * @property array SERVER
+ * @property array ENV
+ * @property array CORS
+ * @property int DEBUG
+ * @property array DIACRITICS
+ * @property string DNSBL
+ * @property array EMOJI
+ * @property string ENCODING
+ * @property bool ESCAPE
+ * @property string EXEMPT
+ * @property object EXCEPTION
+ * @property string FALLBACK
+ * @property array FORMATS
+ * @property string FRAGMENT
+ * @property bool HALT
+ * @property bool HIGHLIGHT
+ * @property array JAR
+ * @property string LANGUAGE
+ * @property string LOCALES
+ * @property string|array LOGGABLE
+ * @property string LOGS
+ * @property mixed ONERROR
+ * @property mixed ONREROUTE
+ * @property string|null PACKAGE
+ * @property array PARAMS
+ * @property string PLUGINS
+ * @property string PREFIX
+ * @property string PREMAP
+ * @property bool QUIET
+ * @property bool RAW
+ * @property array ROUTES
+ * @property string SEED
+ * @property string SERIALIZER
+ * @property string TEMP
+ * @property float TIME
+ * @property bool REROUTE_TRAILING_SLASH
+ * @property string TZ
+ * @property string UI
+ * @property callback UNLOAD
+ * @property string UPLOADS
+ * @property string URI
+ * @property string VERB
+ * @property string VERSION
+ * @property string|null XFRAME
+ * @property-read string AGENT
+ * @property-read bool AJAX
+ * @property-read string BASE
+ * @property-read string BODY
+ * @property-read bool CLI
+ * @property-read array ERROR
+ * @property-read array HEADERS
+ * @property-read string HOST
+ * @property-read string IP
+ * @property-read string PATH
+ * @property-read string PATTERN
+ * @property-read int PORT
+ * @property-read string QUERY
+ * @property-read string REALM
+ * @property-read string RESPONSE
+ * @property-read string ROOT
+ * @property-read string SCHEME
+ */
 //! Base structure
 final class Base extends Prefab implements ArrayAccess {
 
 	//@{ Framework details
 	const
 		PACKAGE='Fat-Free Framework',
-		VERSION='3.8.2-Release';
+		VERSION='3.9.0-Release';
 	//@}
 
 	//@{ HTTP status codes (RFC 2616)
@@ -726,7 +800,7 @@
 	*	@param $arg mixed
 	*	@param $stack array
 	**/
-	function stringify($arg,array $stack=NULL) {
+	function stringify($arg,?array $stack=NULL) {
 		if ($stack) {
 			foreach ($stack as $node)
 				if ($arg===$node)
@@ -1316,7 +1390,7 @@
 	*	@param $trace array|NULL
 	*	@param $format bool
 	**/
-	function trace(array $trace=NULL,$format=TRUE) {
+	function trace(?array $trace=NULL,$format=TRUE) {
 		if (!$trace) {
 			$trace=debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS);
 			$frame=$trace[0];
@@ -1364,7 +1438,7 @@
 	*	@param $trace array
 	*	@param $level int
 	**/
-	function error($code,$text='',array $trace=NULL,$level=0) {
+	function error($code,$text='',?array $trace=NULL,$level=0) {
 		$prior=$this->hive['ERROR'];
 		$header=$this->status($code);
 		$req=$this->hive['VERB'].' '.$this->hive['PATH'];
@@ -1443,7 +1517,7 @@
 	*	@param $body string
 	**/
 	function mock($pattern,
-		array $args=NULL,array $headers=NULL,$body=NULL) {
+		?array $args=NULL,?array $headers=NULL,$body=NULL) {
 		if (!$args)
 			$args=[];
 		$types=['sync','ajax','cli'];
@@ -1536,7 +1610,7 @@
 			if (!preg_match('/'.self::VERBS.'/',$verb))
 				$this->error(501,$verb.' '.$this->hive['URI']);
 			$this->hive['ROUTES'][$parts[3]][$type][strtoupper($verb)]=
-				[$handler,$ttl,$kbps,$alias];
+				[is_string($handler) ? trim($handler) : $handler,$ttl,$kbps,$alias];
 		}
 	}
 
@@ -1728,7 +1802,8 @@
 			if (!$route)
 				continue;
 			if (isset($route[$this->hive['VERB']]) && !$preflight) {
-				if ($this->hive['VERB']=='GET' &&
+				if ($this->hive['REROUTE_TRAILING_SLASH']===TRUE &&
+					$this->hive['VERB']=='GET' &&
 					preg_match('/.+\/$/',$this->hive['PATH']))
 					$this->reroute(substr($this->hive['PATH'],0,-1).
 						($this->hive['QUERY']?('?'.$this->hive['QUERY']):''));
@@ -2081,7 +2156,7 @@
 							array_merge([$match['lval']],
 								str_getcsv($cmd[1]=='config'?
 								$this->cast($match['rval']):
-									$match['rval']))
+									$match['rval'],",",'"', "\\"))
 						);
 					}
 					else {
@@ -2104,7 +2179,7 @@
 							// Mark quoted strings with 0x00 whitespace
 							str_getcsv(preg_replace(
 								'/(?<!\\\\)(")(.*?)\1/',
-								"\\1\x00\\2\\1",trim($rval)))
+								"\\1\x00\\2\\1",trim($rval)),",",'"', "\\")
 						);
 						preg_match('/^(?<section>[^:]+)(?:\:(?<func>.+))?/',
 							$sec,$parts);
@@ -2371,7 +2446,11 @@
 		@ini_set('magic_quotes_gpc',0);
 		@ini_set('register_globals',0);
 		// Intercept errors/exceptions; PHP5.3-compatible
-		$check=error_reporting((E_ALL|E_STRICT)&~(E_NOTICE|E_USER_NOTICE));
+		if (PHP_VERSION_ID >= 80400) {
+			$check = error_reporting((E_ALL) & ~(E_NOTICE | E_USER_NOTICE));
+		} else {
+			$check = error_reporting((E_ALL | E_STRICT) & ~(E_NOTICE | E_USER_NOTICE));
+		}
 		set_exception_handler(
 			function($obj) {
 				/** @var Exception $obj */
@@ -2530,6 +2609,7 @@
 			'PACKAGE'=>self::PACKAGE,
 			'PARAMS'=>[],
 			'PATH'=>$path,
+			'REROUTE_TRAILING_SLASH'=>TRUE,
 			'PATTERN'=>NULL,
 			'PLUGINS'=>$this->fixslashes(__DIR__).'/',
 			'PORT'=>$port,
@@ -2648,7 +2728,8 @@
 				$raw=xcache_get($ndx);
 				break;
 			case 'folder':
-				$raw=$fw->read($parts[1].$ndx);
+				$raw=$fw->read($parts[1]
+					.str_replace(['/','\\'],'',$ndx));
 				break;
 		}
 		if (!empty($raw)) {
@@ -2928,7 +3009,7 @@
 	*	@param $hive array
 	*	@param $mime string
 	**/
-	protected function sandbox(array $hive=NULL,$mime=NULL) {
+	protected function sandbox(?array $hive=NULL,$mime=NULL) {
 		$fw=$this->fw;
 		$implicit=FALSE;
 		if (is_null($hive)) {
@@ -2965,7 +3046,7 @@
 	*	@param $hive array
 	*	@param $ttl int
 	**/
-	function render($file,$mime='text/html',array $hive=NULL,$ttl=0) {
+	function render($file,$mime='text/html',?array $hive=NULL,$ttl=0) {
 		$fw=$this->fw;
 		$cache=Cache::instance();
 		foreach ($fw->split($fw->UI) as $dir) {
@@ -3112,7 +3193,7 @@
 	*	@param $persist bool
 	*	@param $escape bool
 	**/
-	function resolve($node,array $hive=NULL,$ttl=0,$persist=FALSE,$escape=NULL) {
+	function resolve($node,?array $hive=NULL,$ttl=0,$persist=FALSE,$escape=NULL) {
 		$hash=null;
 		$fw=$this->fw;
 		$cache=Cache::instance();
@@ -3174,7 +3255,7 @@
 	*	@param $hive array
 	*	@param $ttl int
 	**/
-	function render($file,$mime='text/html',array $hive=NULL,$ttl=0) {
+	function render($file,$mime='text/html',?array $hive=NULL,$ttl=0) {
 		$fw=$this->fw;
 		$cache=Cache::instance();
 		if (!is_dir($tmp=$fw->TEMP))
diff -ruN old/vendor/bcosca/fatfree-core/CHANGELOG.md new/vendor/bcosca/fatfree-core/CHANGELOG.md
--- old/vendor/bcosca/fatfree-core/CHANGELOG.md	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/CHANGELOG.md	2024-12-31 17:11:04.000000000 +0000
@@ -1,5 +1,21 @@
 CHANGELOG
 
+3.9.0 (29.12.2024)
+---
+*	feat [#377], DB\SQL: check TABLE_SCHEMA in fields introspection query
+*	feat [#379]: Added `REROUTE_TRAILING_SLASH` to optionally disable rerouting
+*	feat [#380], Audit: Adding new mac address validation
+*	fix [#372], Audit: `isprivate()`, `FILTER_FLAG_NO_PRIV_RANGE` usage
+*	fix [#378]: websocket handlers call
+*	fix: php 8.4 session handler compatibility
+*	fix: various php 8.4 warnings
+*	fix [#382]: PHP 8.4 `E_STRICT` deprecation fix
+* 	fix [#371]: trim string based routes handler
+*	fix [bcosca/fatfree#1285]: multi-line template tags 
+* 	fix [#375]: PHP 8.4 Fixes for implicit nullability deprecation
+*	fix [#374]: http_build_query usage deprecation fix
+* 	fix [#369]: unify key string replacement for cache getter/setter
+
 3.8.2 (24.07.2023)
 ---
 *	feat, Base->format: optimize international date formatting for php8.1+
diff -ruN old/vendor/bcosca/fatfree-core/cli/ws.php new/vendor/bcosca/fatfree-core/cli/ws.php
--- old/vendor/bcosca/fatfree-core/cli/ws.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/cli/ws.php	2024-12-31 17:11:04.000000000 +0000
@@ -399,8 +399,8 @@
 		if (is_bool($server->write($this->socket,$buf)))
 			return FALSE;
 		if (!in_array($op,[WS::Pong,WS::Close]) &&
-			isset($this->server->events['send']) &&
-			is_callable($func=$this->server->events['send']))
+			isset($this->server->events()['send']) &&
+			is_callable($func=$this->server->events()['send']))
 			$func($this,$op,$data);
 		return $data;
 	}
@@ -446,8 +446,8 @@
 			case WS::Text:
 				$data=trim($data);
 			case WS::Binary:
-				if (isset($this->server->events['receive']) &&
-					is_callable($func=$this->server->events['receive']))
+				if (isset($this->server->events()['receive']) &&
+					is_callable($func=$this->server->events()['receive']))
 					$func($this,$op,$data);
 				break;
 			}
@@ -459,8 +459,8 @@
 	*	Destroy object
 	**/
 	function __destruct() {
-		if (isset($this->server->events['disconnect']) &&
-			is_callable($func=$this->server->events['disconnect']))
+		if (isset($this->server->events()['disconnect']) &&
+			is_callable($func=$this->server->events()['disconnect']))
 			$func($this);
 	}
 
@@ -479,8 +479,8 @@
 		$this->uri=$uri;
 		$this->headers=$hdrs;
 
-		if (isset($server->events['connect']) &&
-			is_callable($func=$server->events['connect']))
+		if (isset($server->events()['connect']) &&
+			is_callable($func=$server->events()['connect']))
 			$func($this);
 	}
 
diff -ruN old/vendor/bcosca/fatfree-core/composer.json new/vendor/bcosca/fatfree-core/composer.json
--- old/vendor/bcosca/fatfree-core/composer.json	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/composer.json	2024-12-31 17:11:04.000000000 +0000
@@ -4,7 +4,7 @@
 	"homepage": "http://fatfreeframework.com/",
 	"license": "GPL-3.0",
 	"require": {
-		"php": ">=5.4"
+		"php": ">=7.2"
 	},
 	"autoload": {
 		"classmap": ["."]
diff -ruN old/vendor/bcosca/fatfree-core/db/cursor.php new/vendor/bcosca/fatfree-core/db/cursor.php
--- old/vendor/bcosca/fatfree-core/db/cursor.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/db/cursor.php	2024-12-31 17:11:04.000000000 +0000
@@ -64,7 +64,7 @@
 	*	@param $options array
 	*	@param $ttl int
 	**/
-	abstract function find($filter=NULL,array $options=NULL,$ttl=0);
+	abstract function find($filter=NULL,?array $options=NULL,$ttl=0);
 
 	/**
 	*	Count records that match criteria
@@ -73,7 +73,7 @@
 	*	@param $options array
 	*	@param $ttl int
 	**/
-	abstract function count($filter=NULL,array $options=NULL,$ttl=0);
+	abstract function count($filter=NULL,?array $options=NULL,$ttl=0);
 
 	/**
 	*	Insert new record
@@ -126,7 +126,7 @@
 	*	@param $options array
 	*	@param $ttl int
 	**/
-	function findone($filter=NULL,array $options=NULL,$ttl=0) {
+	function findone($filter=NULL,?array $options=NULL,$ttl=0) {
 		if (!$options)
 			$options=[];
 		// Override limit
@@ -147,7 +147,7 @@
 	*	@param $bounce bool
 	**/
 	function paginate(
-		$pos=0,$size=10,$filter=NULL,array $options=NULL,$ttl=0,$bounce=TRUE) {
+		$pos=0,$size=10,$filter=NULL,?array $options=NULL,$ttl=0,$bounce=TRUE) {
 		$total=$this->count($filter,$options,$ttl);
 		$count=(int)ceil($total/$size);
 		if ($bounce)
@@ -169,12 +169,12 @@
 
 	/**
 	*	Map to first record that matches criteria
-	*	@return array|FALSE
+	*	@return \DB\SQL\Mapper|FALSE
 	*	@param $filter string|array
 	*	@param $options array
 	*	@param $ttl int
 	**/
-	function load($filter=NULL,array $options=NULL,$ttl=0) {
+	function load($filter=NULL,?array $options=NULL,$ttl=0) {
 		$this->reset();
 		return ($this->query=$this->find($filter,$options,$ttl)) &&
 			$this->skip(0)?$this->query[$this->ptr]:FALSE;
diff -ruN old/vendor/bcosca/fatfree-core/db/jig/mapper.php new/vendor/bcosca/fatfree-core/db/jig/mapper.php
--- old/vendor/bcosca/fatfree-core/db/jig/mapper.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/db/jig/mapper.php	2024-12-31 17:11:04.000000000 +0000
@@ -156,7 +156,7 @@
 	*	@param $ttl int|array
 	*	@param $log bool
 	**/
-	function find($filter=NULL,array $options=NULL,$ttl=0,$log=TRUE) {
+	function find($filter=NULL,?array $options=NULL,$ttl=0,$log=TRUE) {
 		if (!$options)
 			$options=[];
 		$options+=[
@@ -352,7 +352,7 @@
 	*	@param $options array
 	*	@param $ttl int|array
 	**/
-	function count($filter=NULL,array $options=NULL,$ttl=0) {
+	function count($filter=NULL,?array $options=NULL,$ttl=0) {
 		$now=microtime(TRUE);
 		$out=count($this->find($filter,$options,$ttl,FALSE));
 		$this->db->jot('('.sprintf('%.1f',1e3*(microtime(TRUE)-$now)).'ms) '.
diff -ruN old/vendor/bcosca/fatfree-core/db/jig/session.php new/vendor/bcosca/fatfree-core/db/jig/session.php
--- old/vendor/bcosca/fatfree-core/db/jig/session.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/db/jig/session.php	2024-12-31 17:11:04.000000000 +0000
@@ -22,6 +22,9 @@
 
 namespace DB\Jig;
 
+use ReturnTypeWillChange;
+use SessionAdapter;
+
 //! Jig-managed session handler
 class Session extends Mapper {
 
@@ -43,15 +46,17 @@
 	*	@param $path string
 	*	@param $name string
 	**/
-	function open($path,$name) {
-		return TRUE;
-	}
+    function open(string $path, string $name): bool
+    {
+        return TRUE;
+    }
 
 	/**
 	*	Close session
 	*	@return TRUE
 	**/
-	function close() {
+	function close(): bool
+    {
 		$this->reset();
 		$this->sid=NULL;
 		return TRUE;
@@ -59,10 +64,12 @@
 
 	/**
 	*	Return session data in serialized format
-	*	@return string
+	*	@return string|false
 	*	@param $id string
 	**/
-	function read($id) {
+    #[ReturnTypeWillChange]
+	function read($id)
+    {
 		$this->load(['@session_id=?',$this->sid=$id]);
 		if ($this->dry())
 			return '';
@@ -87,7 +94,8 @@
 	*	@param $id string
 	*	@param $data string
 	**/
-	function write($id,$data) {
+    function write(string $id, string $data): bool
+    {
 		$this->set('session_id',$id);
 		$this->set('data',$data);
 		$this->set('ip',$this->_ip);
@@ -102,19 +110,19 @@
 	*	@return TRUE
 	*	@param $id string
 	**/
-	function destroy($id) {
+	function destroy($id): bool
+    {
 		$this->erase(['@session_id=?',$id]);
 		return TRUE;
 	}
 
 	/**
 	*	Garbage collector
-	*	@return TRUE
-	*	@param $max int
 	**/
-	function cleanup($max) {
-		$this->erase(['@stamp+?<?',$max,time()]);
-		return TRUE;
+    #[ReturnTypeWillChange]
+    function gc(int $max_lifetime): int
+    {
+		return (int) $this->erase(['@stamp+?<?',$max_lifetime,time()]);
 	}
 
 	/**
@@ -169,14 +177,19 @@
 	function __construct(\DB\Jig $db,$file='sessions',$onsuspect=NULL,$key=NULL) {
 		parent::__construct($db,$file);
 		$this->onsuspect=$onsuspect;
-		session_set_save_handler(
-			[$this,'open'],
-			[$this,'close'],
-			[$this,'read'],
-			[$this,'write'],
-			[$this,'destroy'],
-			[$this,'cleanup']
-		);
+        if (version_compare(PHP_VERSION, '8.4.0')>=0) {
+            // TODO: remove this when php7 support is dropped
+            session_set_save_handler(new SessionAdapter($this));
+        } else {
+            session_set_save_handler(
+                [$this,'open'],
+                [$this,'close'],
+                [$this,'read'],
+                [$this,'write'],
+                [$this,'destroy'],
+                [$this,'gc']
+            );
+        }
 		register_shutdown_function('session_commit');
 		$fw=\Base::instance();
 		$headers=$fw->HEADERS;
diff -ruN old/vendor/bcosca/fatfree-core/db/jig.php new/vendor/bcosca/fatfree-core/db/jig.php
--- old/vendor/bcosca/fatfree-core/db/jig.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/db/jig.php	2024-12-31 17:11:04.000000000 +0000
@@ -78,7 +78,7 @@
 	*	@param $file string
 	*	@param $data array
 	**/
-	function write($file,array $data=NULL) {
+	function write($file,?array $data=NULL) {
 		if (!$this->dir || $this->lazy)
 			return count($this->data[$file]=$data);
 		$fw=\Base::instance();
diff -ruN old/vendor/bcosca/fatfree-core/db/mongo/mapper.php new/vendor/bcosca/fatfree-core/db/mongo/mapper.php
--- old/vendor/bcosca/fatfree-core/db/mongo/mapper.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/db/mongo/mapper.php	2024-12-31 17:11:04.000000000 +0000
@@ -121,7 +121,7 @@
 	*	@param $options array
 	*	@param $ttl int|array
 	**/
-	function select($fields=NULL,$filter=NULL,array $options=NULL,$ttl=0) {
+	function select($fields=NULL,$filter=NULL,?array $options=NULL,$ttl=0) {
 		if (!$options)
 			$options=[];
 		$options+=[
@@ -199,7 +199,7 @@
 	*	@param $options array
 	*	@param $ttl int|array
 	**/
-	function find($filter=NULL,array $options=NULL,$ttl=0) {
+	function find($filter=NULL,?array $options=NULL,$ttl=0) {
 		if (!$options)
 			$options=[];
 		$options+=[
@@ -218,7 +218,7 @@
 	*	@param $options array
 	*	@param $ttl int|array
 	**/
-	function count($filter=NULL,array $options=NULL,$ttl=0) {
+	function count($filter=NULL,?array $options=NULL,$ttl=0) {
 		$fw=\Base::instance();
 		$cache=\Cache::instance();
 		$tag='';
diff -ruN old/vendor/bcosca/fatfree-core/db/mongo/session.php new/vendor/bcosca/fatfree-core/db/mongo/session.php
--- old/vendor/bcosca/fatfree-core/db/mongo/session.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/db/mongo/session.php	2024-12-31 17:11:04.000000000 +0000
@@ -22,6 +22,9 @@
 
 namespace DB\Mongo;
 
+use ReturnTypeWillChange;
+use SessionAdapter;
+
 //! MongoDB-managed session handler
 class Session extends Mapper {
 
@@ -43,7 +46,8 @@
 	*	@param $path string
 	*	@param $name string
 	**/
-	function open($path,$name) {
+    function open(string $path, string $name): bool
+    {
 		return TRUE;
 	}
 
@@ -51,7 +55,8 @@
 	*	Close session
 	*	@return TRUE
 	**/
-	function close() {
+	function close(): bool
+    {
 		$this->reset();
 		$this->sid=NULL;
 		return TRUE;
@@ -62,7 +67,9 @@
 	*	@return string
 	*	@param $id string
 	**/
-	function read($id) {
+    #[ReturnTypeWillChange]
+    function read(string $id)
+    {
 		$this->load(['session_id'=>$this->sid=$id]);
 		if ($this->dry())
 			return '';
@@ -87,7 +94,8 @@
 	*	@param $id string
 	*	@param $data string
 	**/
-	function write($id,$data) {
+    function write(string $id, string $data): bool
+    {
 		$this->set('session_id',$id);
 		$this->set('data',$data);
 		$this->set('ip',$this->_ip);
@@ -102,19 +110,19 @@
 	*	@return TRUE
 	*	@param $id string
 	**/
-	function destroy($id) {
+	function destroy($id): bool
+    {
 		$this->erase(['session_id'=>$id]);
 		return TRUE;
 	}
 
 	/**
 	*	Garbage collector
-	*	@return TRUE
-	*	@param $max int
 	**/
-	function cleanup($max) {
-		$this->erase(['$where'=>'this.stamp+'.$max.'<'.time()]);
-		return TRUE;
+    #[ReturnTypeWillChange]
+    function gc(int $max_lifetime): int
+    {
+		return (int) $this->erase(['$where'=>'this.stamp+'.$max_lifetime.'<'.time()]);
 	}
 
 	/**
@@ -169,14 +177,19 @@
 	function __construct(\DB\Mongo $db,$table='sessions',$onsuspect=NULL,$key=NULL) {
 		parent::__construct($db,$table);
 		$this->onsuspect=$onsuspect;
-		session_set_save_handler(
-			[$this,'open'],
-			[$this,'close'],
-			[$this,'read'],
-			[$this,'write'],
-			[$this,'destroy'],
-			[$this,'cleanup']
-		);
+        if (version_compare(PHP_VERSION, '8.4.0')>=0) {
+            // TODO: remove this when php7 support is dropped
+            session_set_save_handler(new SessionAdapter($this));
+        } else {
+            session_set_save_handler(
+                [$this,'open'],
+                [$this,'close'],
+                [$this,'read'],
+                [$this,'write'],
+                [$this,'destroy'],
+                [$this,'gc']
+            );
+        }
 		register_shutdown_function('session_commit');
 		$fw=\Base::instance();
 		$headers=$fw->HEADERS;
diff -ruN old/vendor/bcosca/fatfree-core/db/mongo.php new/vendor/bcosca/fatfree-core/db/mongo.php
--- old/vendor/bcosca/fatfree-core/db/mongo.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/db/mongo.php	2024-12-31 17:11:04.000000000 +0000
@@ -130,7 +130,7 @@
 	*	@param $dbname string
 	*	@param $options array
 	**/
-	function __construct($dsn,$dbname,array $options=NULL) {
+	function __construct($dsn,$dbname,?array $options=NULL) {
 		$this->uuid=\Base::instance()->hash($this->dsn=$dsn);
 		if ($this->legacy=class_exists('\MongoClient')) {
 			$this->db=new \MongoDB(new \MongoClient($dsn,$options?:[]),$dbname);
diff -ruN old/vendor/bcosca/fatfree-core/db/sql/mapper.php new/vendor/bcosca/fatfree-core/db/sql/mapper.php
--- old/vendor/bcosca/fatfree-core/db/sql/mapper.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/db/sql/mapper.php	2024-12-31 17:11:04.000000000 +0000
@@ -205,7 +205,7 @@
 	*	@param $filter string|array
 	*	@param $options array
 	**/
-	function stringify($fields,$filter=NULL,array $options=NULL) {
+	function stringify($fields,$filter=NULL,?array $options=NULL) {
 		if (!$options)
 			$options=[];
 		$options+=[
@@ -303,7 +303,7 @@
 	*	@param $options array
 	*	@param $ttl int|array
 	**/
-	function select($fields,$filter=NULL,array $options=NULL,$ttl=0) {
+	function select($fields,$filter=NULL,?array $options=NULL,$ttl=0) {
 		list($sql,$args)=$this->stringify($fields,$filter,$options);
 		$result=$this->db->exec($sql,$args,$ttl);
 		$out=[];
@@ -329,7 +329,7 @@
 	*	@param $options array
 	*	@param $ttl int|array
 	**/
-	function find($filter=NULL,array $options=NULL,$ttl=0) {
+	function find($filter=NULL,?array $options=NULL,$ttl=0) {
 		if (!$options)
 			$options=[];
 		$options+=[
@@ -355,7 +355,7 @@
 	*	@param $options array
 	*	@param $ttl int|array
 	**/
-	function count($filter=NULL,array $options=NULL,$ttl=0) {
+	function count($filter=NULL,?array $options=NULL,$ttl=0) {
 		$adhoc=[];
 		// with grouping involved, we need to wrap the actualy query and count the results
 		if ($subquery_mode=($options && !empty($options['group']))) {
diff -ruN old/vendor/bcosca/fatfree-core/db/sql/session.php new/vendor/bcosca/fatfree-core/db/sql/session.php
--- old/vendor/bcosca/fatfree-core/db/sql/session.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/db/sql/session.php	2024-12-31 17:11:04.000000000 +0000
@@ -22,6 +22,9 @@
 
 namespace DB\SQL;
 
+use ReturnTypeWillChange;
+use SessionAdapter;
+
 //! SQL-managed session handler
 class Session extends Mapper {
 
@@ -43,7 +46,8 @@
 	*	@param $path string
 	*	@param $name string
 	**/
-	function open($path,$name) {
+    function open(string $path, string $name): bool
+    {
 		return TRUE;
 	}
 
@@ -51,7 +55,8 @@
 	*	Close session
 	*	@return TRUE
 	**/
-	function close() {
+    function close(): bool
+    {
 		$this->reset();
 		$this->sid=NULL;
 		return TRUE;
@@ -59,10 +64,12 @@
 
 	/**
 	*	Return session data in serialized format
-	*	@return string
+	*	@return string|false
 	*	@param $id string
 	**/
-	function read($id) {
+    #[ReturnTypeWillChange]
+    function read(string $id)
+    {
 		$this->load(['session_id=?',$this->sid=$id]);
 		if ($this->dry())
 			return '';
@@ -86,7 +93,8 @@
 	*	@param $id string
 	*	@param $data string
 	**/
-	function write($id,$data) {
+    function write(string $id, string $data): bool
+    {
 		$this->set('session_id',$id);
 		$this->set('data',$data);
 		$this->set('ip',$this->_ip);
@@ -101,19 +109,19 @@
 	*	@return TRUE
 	*	@param $id string
 	**/
-	function destroy($id) {
+	function destroy($id): bool
+    {
 		$this->erase(['session_id=?',$id]);
 		return TRUE;
 	}
 
 	/**
 	*	Garbage collector
-	*	@return TRUE
-	*	@param $max int
 	**/
-	function cleanup($max) {
-		$this->erase(['stamp+?<?',$max,time()]);
-		return TRUE;
+    #[ReturnTypeWillChange]
+    function gc(int $max_lifetime): int
+    {
+		return (int) $this->erase(['stamp+?<?',$max_lifetime,time()]);
 	}
 
 	/**
@@ -194,14 +202,19 @@
 		}
 		parent::__construct($db,$table);
 		$this->onsuspect=$onsuspect;
-		session_set_save_handler(
-			[$this,'open'],
-			[$this,'close'],
-			[$this,'read'],
-			[$this,'write'],
-			[$this,'destroy'],
-			[$this,'cleanup']
-		);
+        if (version_compare(PHP_VERSION, '8.4.0')>=0) {
+            // TODO: remove this when php7 support is dropped
+            session_set_save_handler(new SessionAdapter($this));
+        } else {
+            session_set_save_handler(
+                [$this,'open'],
+                [$this,'close'],
+                [$this,'read'],
+                [$this,'write'],
+                [$this,'destroy'],
+                [$this,'gc']
+            );
+        }
 		register_shutdown_function('session_commit');
 		$fw=\Base::instance();
 		$headers=$fw->HEADERS;
diff -ruN old/vendor/bcosca/fatfree-core/db/sql.php new/vendor/bcosca/fatfree-core/db/sql.php
--- old/vendor/bcosca/fatfree-core/db/sql.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/db/sql.php	2024-12-31 17:11:04.000000000 +0000
@@ -375,6 +375,7 @@
 							('AND K.TABLE_CATALOG=T.TABLE_CATALOG '):'').
 				'WHERE '.
 					'C.TABLE_NAME='.$this->quote($table).
+					(empty($schema) ? '' : ' AND C.TABLE_SCHEMA='.$this->quote($schema)).
 					($this->dbname?
 						(' AND C.TABLE_CATALOG='.
 							$this->quote($this->dbname)):''),
@@ -535,7 +536,7 @@
 	*	@param $pw string
 	*	@param $options array
 	**/
-	function __construct($dsn,$user=NULL,$pw=NULL,array $options=NULL) {
+	function __construct($dsn,$user=NULL,$pw=NULL,?array $options=NULL) {
 		$fw=\Base::instance();
 		$this->uuid=$fw->hash($this->dsn=$dsn);
 		if (preg_match('/^.+?(?:dbname|database)=(.+?)(?=;|$)/is',$dsn,$parts))
diff -ruN old/vendor/bcosca/fatfree-core/.github/FUNDING.yml new/vendor/bcosca/fatfree-core/.github/FUNDING.yml
--- old/vendor/bcosca/fatfree-core/.github/FUNDING.yml	1970-01-01 01:00:00.000000000 +0100
+++ new/vendor/bcosca/fatfree-core/.github/FUNDING.yml	2024-12-31 17:11:04.000000000 +0000
@@ -0,0 +1,2 @@
+github: ikkez
+buy_me_a_coffee: ikkez
diff -ruN old/vendor/bcosca/fatfree-core/sessionadapter.php new/vendor/bcosca/fatfree-core/sessionadapter.php
--- old/vendor/bcosca/fatfree-core/sessionadapter.php	1970-01-01 01:00:00.000000000 +0100
+++ new/vendor/bcosca/fatfree-core/sessionadapter.php	2024-12-31 17:11:04.000000000 +0000
@@ -0,0 +1,46 @@
+<?php
+
+/**
+ * To be removed once the legacy session handlers are reworked when php 7 support is dropped
+ */
+class SessionAdapter implements \SessionHandlerInterface
+{
+    protected $_handler;
+
+    public function __construct($handler)
+    {
+        $this->_handler = $handler;
+    }
+
+    public function close(): bool
+    {
+        return $this->_handler->close();
+    }
+
+    public function destroy(string $id): bool
+    {
+        return $this->_handler->destroy($id);
+    }
+
+    #[ReturnTypeWillChange]
+    public function gc(int $max_lifetime): int
+    {
+        return $this->_handler->gc($max_lifetime);
+    }
+
+    public function open(string $path, string $name): bool
+    {
+        return $this->_handler->open($path, $name);
+    }
+
+    #[ReturnTypeWillChange]
+    public function read(string $id): string
+    {
+        return $this->_handler->read($id);
+    }
+
+    public function write(string $id, string $data): bool
+    {
+        return $this->_handler->write($id, $data);
+    }
+}
\ No newline at end of file
diff -ruN old/vendor/bcosca/fatfree-core/session.php new/vendor/bcosca/fatfree-core/session.php
--- old/vendor/bcosca/fatfree-core/session.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/session.php	2024-12-31 17:11:04.000000000 +0000
@@ -45,7 +45,8 @@
 	*	@param $path string
 	*	@param $name string
 	**/
-	function open($path,$name) {
+	function open(string $path, string $name): bool
+    {
 		return TRUE;
 	}
 
@@ -53,7 +54,8 @@
 	*	Close session
 	*	@return TRUE
 	**/
-	function close() {
+	function close(): bool
+    {
 		$this->sid=NULL;
 		$this->_data=[];
 		return TRUE;
@@ -61,10 +63,12 @@
 
 	/**
 	*	Return session data in serialized format
-	*	@return string
+	*	@return false|string
 	*	@param $id string
 	**/
-	function read($id) {
+	#[ReturnTypeWillChange]
+    function read(string $id)
+    {
 		$this->sid=$id;
 		if (!$data=$this->_cache->get($id.'.@'))
 			return '';
@@ -85,11 +89,9 @@
 
 	/**
 	*	Write session data
-	*	@return TRUE
-	*	@param $id string
-	*	@param $data string
-	**/
-	function write($id,$data) {
+	*/
+	function write(string $id, string $data): bool
+    {
 		$fw=Base::instance();
 		$jar=$fw->JAR;
 		$this->_cache->set($id.'.@',
@@ -106,21 +108,20 @@
 
 	/**
 	*	Destroy session
-	*	@return TRUE
-	*	@param $id string
-	**/
-	function destroy($id) {
+	*/
+	function destroy(string $id): bool
+    {
 		$this->_cache->clear($id.'.@');
 		return TRUE;
 	}
 
 	/**
 	*	Garbage collector
-	*	@return TRUE
-	*	@param $max int
 	**/
-	function cleanup($max) {
-		$this->_cache->reset('.@',$max);
+    #[ReturnTypeWillChange]
+    function gc(int $max_lifetime)
+    {
+		$this->_cache->reset('.@',$max_lifetime);
 		return TRUE;
 	}
 
@@ -175,14 +176,19 @@
 	function __construct($onsuspect=NULL,$key=NULL,$cache=null) {
 		$this->onsuspect=$onsuspect;
 		$this->_cache=$cache?:Cache::instance();
-		session_set_save_handler(
-			[$this,'open'],
-			[$this,'close'],
-			[$this,'read'],
-			[$this,'write'],
-			[$this,'destroy'],
-			[$this,'cleanup']
-		);
+        if (version_compare(PHP_VERSION, '8.4.0')>=0) {
+            // TODO: remove this when php7 support is dropped
+            session_set_save_handler(new SessionAdapter($this));
+        } else {
+            session_set_save_handler(
+                [$this,'open'],
+                [$this,'close'],
+                [$this,'read'],
+                [$this,'write'],
+                [$this,'destroy'],
+                [$this,'gc']
+            );
+        }
 		register_shutdown_function('session_commit');
 		$fw=\Base::instance();
 		$headers=$fw->HEADERS;
diff -ruN old/vendor/bcosca/fatfree-core/template.php new/vendor/bcosca/fatfree-core/template.php
--- old/vendor/bcosca/fatfree-core/template.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/template.php	2024-12-31 17:11:04.000000000 +0000
@@ -275,7 +275,7 @@
 			if (preg_match('/^(.{0,'.$w.'}?)<(\/?)(?:F3:)?'.
 				'('.$this->tags.')\b((?:\s+[\w.:@!\-]+'.
 				'(?:\h*=\h*(?:"(?:.*?)"|\'(?:.*?)\'))?|'.
-				'\h*\{\{.+?\}\})*)\h*(\/?)>/is',
+				'\h*\{\{.+?\}\})*)\s*(\/?)>/is',
 				substr($text,$ptr),$match)) {
 				if (strlen($tmp) || isset($match[1]))
 					$tree[]=$tmp.$match[1];
diff -ruN old/vendor/bcosca/fatfree-core/web/oauth2.php new/vendor/bcosca/fatfree-core/web/oauth2.php
--- old/vendor/bcosca/fatfree-core/web/oauth2.php	2024-12-02 15:16:22.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/web/oauth2.php	2024-12-31 17:11:04.000000000 +0000
@@ -39,7 +39,7 @@
 	**/
 	function uri($endpoint,$query=TRUE) {
 		return $endpoint.($query?('?'.
-				http_build_query($this->args,null,'&',$this->enc_type)):'');
+				http_build_query($this->args,'','&',$this->enc_type)):'');
 	}
 
 	/**
@@ -53,7 +53,7 @@
 		$web=\Web::instance();
 		$options=[
 			'method'=>$method,
-			'content'=>http_build_query($this->args,null,'&',$this->enc_type),
+			'content'=>http_build_query($this->args,'','&',$this->enc_type),
 			'header'=>['Accept: application/json']
 		];
 		if ($token)
diff -ruN old/vendor/bcosca/fatfree-core/web/openid.php new/vendor/bcosca/fatfree-core/web/openid.php
--- old/vendor/bcosca/fatfree-core/web/openid.php	2024-12-02 15:16:22.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/web/openid.php	2024-12-31 17:11:04.000000000 +0000
@@ -141,7 +141,7 @@
 	*	@param $attr array
 	*	@param $reqd string|array
 	**/
-	function auth($proxy=NULL,$attr=[],array $reqd=NULL) {
+	function auth($proxy=NULL,$attr=[],?array $reqd=NULL) {
 		$fw=\Base::instance();
 		$root=$fw->SCHEME.'://'.$fw->HOST;
 		if (empty($this->args['trust_root']))
diff -ruN old/vendor/bcosca/fatfree-core/web/pingback.php new/vendor/bcosca/fatfree-core/web/pingback.php
--- old/vendor/bcosca/fatfree-core/web/pingback.php	2024-12-02 15:16:22.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/web/pingback.php	2024-12-31 17:11:04.000000000 +0000
@@ -69,7 +69,7 @@
 			$parts['host']==$fw->HOST) {
 			$req=$web->request($source);
 			$doc=new \DOMDocument('1.0',$fw->ENCODING);
-			$doc->stricterrorchecking=FALSE;
+			$doc->strictErrorChecking=FALSE;
 			$doc->recover=TRUE;
 			if (@$doc->loadhtml($req['body'])) {
 				// Parse anchor tags
diff -ruN old/vendor/bcosca/fatfree-core/web.php new/vendor/bcosca/fatfree-core/web.php
--- old/vendor/bcosca/fatfree-core/web.php	2024-12-02 15:16:22.000000000 +0000
+++ new/vendor/bcosca/fatfree-core/web.php	2024-12-31 17:11:04.000000000 +0000
@@ -592,7 +592,7 @@
 	*	@param $url string
 	*	@param $options array
 	**/
-	function request($url,array $options=NULL) {
+	function request($url,?array $options=NULL) {
 		$fw=Base::instance();
 		$parts=parse_url($url);
 		if (empty($parts['scheme'])) {
diff -ruN old/vendor/composer/autoload_classmap.php new/vendor/composer/autoload_classmap.php
--- old/vendor/composer/autoload_classmap.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/composer/autoload_classmap.php	2025-01-04 18:03:14.000000000 +0000
@@ -2,7 +2,7 @@
 
 // autoload_classmap.php @generated by Composer
 
-$vendorDir = dirname(dirname(__FILE__));
+$vendorDir = dirname(__DIR__);
 $baseDir = dirname($vendorDir);
 
 return array(
@@ -37,6 +37,7 @@
     'Registry' => $vendorDir . '/bcosca/fatfree-core/base.php',
     'SMTP' => $vendorDir . '/bcosca/fatfree-core/smtp.php',
     'Session' => $vendorDir . '/bcosca/fatfree-core/session.php',
+    'SessionAdapter' => $vendorDir . '/bcosca/fatfree-core/sessionadapter.php',
     'Template' => $vendorDir . '/bcosca/fatfree-core/template.php',
     'Test' => $vendorDir . '/bcosca/fatfree-core/test.php',
     'UTF' => $vendorDir . '/bcosca/fatfree-core/utf.php',
diff -ruN old/vendor/composer/autoload_namespaces.php new/vendor/composer/autoload_namespaces.php
--- old/vendor/composer/autoload_namespaces.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/composer/autoload_namespaces.php	2025-01-04 18:03:14.000000000 +0000
@@ -2,7 +2,7 @@
 
 // autoload_namespaces.php @generated by Composer
 
-$vendorDir = dirname(dirname(__FILE__));
+$vendorDir = dirname(__DIR__);
 $baseDir = dirname($vendorDir);
 
 return array(
diff -ruN old/vendor/composer/autoload_psr4.php new/vendor/composer/autoload_psr4.php
--- old/vendor/composer/autoload_psr4.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/composer/autoload_psr4.php	2025-01-04 18:03:14.000000000 +0000
@@ -2,7 +2,7 @@
 
 // autoload_psr4.php @generated by Composer
 
-$vendorDir = dirname(dirname(__FILE__));
+$vendorDir = dirname(__DIR__);
 $baseDir = dirname($vendorDir);
 
 return array(
diff -ruN old/vendor/composer/autoload_real.php new/vendor/composer/autoload_real.php
--- old/vendor/composer/autoload_real.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/composer/autoload_real.php	2025-01-04 18:03:14.000000000 +0000
@@ -25,30 +25,11 @@
         require __DIR__ . '/platform_check.php';
 
         spl_autoload_register(array('ComposerAutoloaderInit043cbf4ae0508c49f665d1a5973c08c0', 'loadClassLoader'), true, true);
-        self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(\dirname(__FILE__)));
+        self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(__DIR__));
         spl_autoload_unregister(array('ComposerAutoloaderInit043cbf4ae0508c49f665d1a5973c08c0', 'loadClassLoader'));
 
-        $useStaticLoader = PHP_VERSION_ID >= 50600 && !defined('HHVM_VERSION') && (!function_exists('zend_loader_file_encoded') || !zend_loader_file_encoded());
-        if ($useStaticLoader) {
-            require __DIR__ . '/autoload_static.php';
-
-            call_user_func(\Composer\Autoload\ComposerStaticInit043cbf4ae0508c49f665d1a5973c08c0::getInitializer($loader));
-        } else {
-            $map = require __DIR__ . '/autoload_namespaces.php';
-            foreach ($map as $namespace => $path) {
-                $loader->set($namespace, $path);
-            }
-
-            $map = require __DIR__ . '/autoload_psr4.php';
-            foreach ($map as $namespace => $path) {
-                $loader->setPsr4($namespace, $path);
-            }
-
-            $classMap = require __DIR__ . '/autoload_classmap.php';
-            if ($classMap) {
-                $loader->addClassMap($classMap);
-            }
-        }
+        require __DIR__ . '/autoload_static.php';
+        call_user_func(\Composer\Autoload\ComposerStaticInit043cbf4ae0508c49f665d1a5973c08c0::getInitializer($loader));
 
         $loader->register(true);
 
diff -ruN old/vendor/composer/autoload_static.php new/vendor/composer/autoload_static.php
--- old/vendor/composer/autoload_static.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/composer/autoload_static.php	2025-01-04 18:03:14.000000000 +0000
@@ -38,6 +38,7 @@
         'Registry' => __DIR__ . '/..' . '/bcosca/fatfree-core/base.php',
         'SMTP' => __DIR__ . '/..' . '/bcosca/fatfree-core/smtp.php',
         'Session' => __DIR__ . '/..' . '/bcosca/fatfree-core/session.php',
+        'SessionAdapter' => __DIR__ . '/..' . '/bcosca/fatfree-core/sessionadapter.php',
         'Template' => __DIR__ . '/..' . '/bcosca/fatfree-core/template.php',
         'Test' => __DIR__ . '/..' . '/bcosca/fatfree-core/test.php',
         'UTF' => __DIR__ . '/..' . '/bcosca/fatfree-core/utf.php',
diff -ruN old/vendor/composer/ClassLoader.php new/vendor/composer/ClassLoader.php
--- old/vendor/composer/ClassLoader.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/composer/ClassLoader.php	2024-11-18 08:24:10.000000000 +0000
@@ -42,30 +42,76 @@
  */
 class ClassLoader
 {
+    /** @var \Closure(string):void */
+    private static $includeFile;
+
+    /** @var string|null */
     private $vendorDir;
 
     // PSR-4
+    /**
+     * @var array<string, array<string, int>>
+     */
     private $prefixLengthsPsr4 = array();
+    /**
+     * @var array<string, list<string>>
+     */
     private $prefixDirsPsr4 = array();
+    /**
+     * @var list<string>
+     */
     private $fallbackDirsPsr4 = array();
 
     // PSR-0
+    /**
+     * List of PSR-0 prefixes
+     *
+     * Structured as array('F (first letter)' => array('Foo\Bar (full prefix)' => array('path', 'path2')))
+     *
+     * @var array<string, array<string, list<string>>>
+     */
     private $prefixesPsr0 = array();
+    /**
+     * @var list<string>
+     */
     private $fallbackDirsPsr0 = array();
 
+    /** @var bool */
     private $useIncludePath = false;
+
+    /**
+     * @var array<string, string>
+     */
     private $classMap = array();
+
+    /** @var bool */
     private $classMapAuthoritative = false;
+
+    /**
+     * @var array<string, bool>
+     */
     private $missingClasses = array();
+
+    /** @var string|null */
     private $apcuPrefix;
 
+    /**
+     * @var array<string, self>
+     */
     private static $registeredLoaders = array();
 
+    /**
+     * @param string|null $vendorDir
+     */
     public function __construct($vendorDir = null)
     {
         $this->vendorDir = $vendorDir;
+        self::initializeIncludeClosure();
     }
 
+    /**
+     * @return array<string, list<string>>
+     */
     public function getPrefixes()
     {
         if (!empty($this->prefixesPsr0)) {
@@ -75,28 +121,42 @@
         return array();
     }
 
+    /**
+     * @return array<string, list<string>>
+     */
     public function getPrefixesPsr4()
     {
         return $this->prefixDirsPsr4;
     }
 
+    /**
+     * @return list<string>
+     */
     public function getFallbackDirs()
     {
         return $this->fallbackDirsPsr0;
     }
 
+    /**
+     * @return list<string>
+     */
     public function getFallbackDirsPsr4()
     {
         return $this->fallbackDirsPsr4;
     }
 
+    /**
+     * @return array<string, string> Array of classname => path
+     */
     public function getClassMap()
     {
         return $this->classMap;
     }
 
     /**
-     * @param array $classMap Class to filename map
+     * @param array<string, string> $classMap Class to filename map
+     *
+     * @return void
      */
     public function addClassMap(array $classMap)
     {
@@ -111,22 +171,25 @@
      * Registers a set of PSR-0 directories for a given prefix, either
      * appending or prepending to the ones previously set for this prefix.
      *
-     * @param string       $prefix  The prefix
-     * @param array|string $paths   The PSR-0 root directories
-     * @param bool         $prepend Whether to prepend the directories
+     * @param string              $prefix  The prefix
+     * @param list<string>|string $paths   The PSR-0 root directories
+     * @param bool                $prepend Whether to prepend the directories
+     *
+     * @return void
      */
     public function add($prefix, $paths, $prepend = false)
     {
+        $paths = (array) $paths;
         if (!$prefix) {
             if ($prepend) {
                 $this->fallbackDirsPsr0 = array_merge(
-                    (array) $paths,
+                    $paths,
                     $this->fallbackDirsPsr0
                 );
             } else {
                 $this->fallbackDirsPsr0 = array_merge(
                     $this->fallbackDirsPsr0,
-                    (array) $paths
+                    $paths
                 );
             }
 
@@ -135,19 +198,19 @@
 
         $first = $prefix[0];
         if (!isset($this->prefixesPsr0[$first][$prefix])) {
-            $this->prefixesPsr0[$first][$prefix] = (array) $paths;
+            $this->prefixesPsr0[$first][$prefix] = $paths;
 
             return;
         }
         if ($prepend) {
             $this->prefixesPsr0[$first][$prefix] = array_merge(
-                (array) $paths,
+                $paths,
                 $this->prefixesPsr0[$first][$prefix]
             );
         } else {
             $this->prefixesPsr0[$first][$prefix] = array_merge(
                 $this->prefixesPsr0[$first][$prefix],
-                (array) $paths
+                $paths
             );
         }
     }
@@ -156,25 +219,28 @@
      * Registers a set of PSR-4 directories for a given namespace, either
      * appending or prepending to the ones previously set for this namespace.
      *
-     * @param string       $prefix  The prefix/namespace, with trailing '\\'
-     * @param array|string $paths   The PSR-4 base directories
-     * @param bool         $prepend Whether to prepend the directories
+     * @param string              $prefix  The prefix/namespace, with trailing '\\'
+     * @param list<string>|string $paths   The PSR-4 base directories
+     * @param bool                $prepend Whether to prepend the directories
      *
      * @throws \InvalidArgumentException
+     *
+     * @return void
      */
     public function addPsr4($prefix, $paths, $prepend = false)
     {
+        $paths = (array) $paths;
         if (!$prefix) {
             // Register directories for the root namespace.
             if ($prepend) {
                 $this->fallbackDirsPsr4 = array_merge(
-                    (array) $paths,
+                    $paths,
                     $this->fallbackDirsPsr4
                 );
             } else {
                 $this->fallbackDirsPsr4 = array_merge(
                     $this->fallbackDirsPsr4,
-                    (array) $paths
+                    $paths
                 );
             }
         } elseif (!isset($this->prefixDirsPsr4[$prefix])) {
@@ -184,18 +250,18 @@
                 throw new \InvalidArgumentException("A non-empty PSR-4 prefix must end with a namespace separator.");
             }
             $this->prefixLengthsPsr4[$prefix[0]][$prefix] = $length;
-            $this->prefixDirsPsr4[$prefix] = (array) $paths;
+            $this->prefixDirsPsr4[$prefix] = $paths;
         } elseif ($prepend) {
             // Prepend directories for an already registered namespace.
             $this->prefixDirsPsr4[$prefix] = array_merge(
-                (array) $paths,
+                $paths,
                 $this->prefixDirsPsr4[$prefix]
             );
         } else {
             // Append directories for an already registered namespace.
             $this->prefixDirsPsr4[$prefix] = array_merge(
                 $this->prefixDirsPsr4[$prefix],
-                (array) $paths
+                $paths
             );
         }
     }
@@ -204,8 +270,10 @@
      * Registers a set of PSR-0 directories for a given prefix,
      * replacing any others previously set for this prefix.
      *
-     * @param string       $prefix The prefix
-     * @param array|string $paths  The PSR-0 base directories
+     * @param string              $prefix The prefix
+     * @param list<string>|string $paths  The PSR-0 base directories
+     *
+     * @return void
      */
     public function set($prefix, $paths)
     {
@@ -220,10 +288,12 @@
      * Registers a set of PSR-4 directories for a given namespace,
      * replacing any others previously set for this namespace.
      *
-     * @param string       $prefix The prefix/namespace, with trailing '\\'
-     * @param array|string $paths  The PSR-4 base directories
+     * @param string              $prefix The prefix/namespace, with trailing '\\'
+     * @param list<string>|string $paths  The PSR-4 base directories
      *
      * @throws \InvalidArgumentException
+     *
+     * @return void
      */
     public function setPsr4($prefix, $paths)
     {
@@ -243,6 +313,8 @@
      * Turns on searching the include path for class files.
      *
      * @param bool $useIncludePath
+     *
+     * @return void
      */
     public function setUseIncludePath($useIncludePath)
     {
@@ -265,6 +337,8 @@
      * that have not been registered with the class map.
      *
      * @param bool $classMapAuthoritative
+     *
+     * @return void
      */
     public function setClassMapAuthoritative($classMapAuthoritative)
     {
@@ -285,6 +359,8 @@
      * APCu prefix to use to cache found/not-found classes, if the extension is enabled.
      *
      * @param string|null $apcuPrefix
+     *
+     * @return void
      */
     public function setApcuPrefix($apcuPrefix)
     {
@@ -305,14 +381,18 @@
      * Registers this instance as an autoloader.
      *
      * @param bool $prepend Whether to prepend the autoloader or not
+     *
+     * @return void
      */
     public function register($prepend = false)
     {
         spl_autoload_register(array($this, 'loadClass'), true, $prepend);
 
         if (null === $this->vendorDir) {
-            //no-op
-        } elseif ($prepend) {
+            return;
+        }
+
+        if ($prepend) {
             self::$registeredLoaders = array($this->vendorDir => $this) + self::$registeredLoaders;
         } else {
             unset(self::$registeredLoaders[$this->vendorDir]);
@@ -322,6 +402,8 @@
 
     /**
      * Unregisters this instance as an autoloader.
+     *
+     * @return void
      */
     public function unregister()
     {
@@ -336,15 +418,18 @@
      * Loads the given class or interface.
      *
      * @param  string    $class The name of the class
-     * @return bool|null True if loaded, null otherwise
+     * @return true|null True if loaded, null otherwise
      */
     public function loadClass($class)
     {
         if ($file = $this->findFile($class)) {
-            includeFile($file);
+            $includeFile = self::$includeFile;
+            $includeFile($file);
 
             return true;
         }
+
+        return null;
     }
 
     /**
@@ -390,15 +475,20 @@
     }
 
     /**
-     * Returns the currently registered loaders indexed by their corresponding vendor directories.
+     * Returns the currently registered loaders keyed by their corresponding vendor directories.
      *
-     * @return self[]
+     * @return array<string, self>
      */
     public static function getRegisteredLoaders()
     {
         return self::$registeredLoaders;
     }
 
+    /**
+     * @param  string       $class
+     * @param  string       $ext
+     * @return string|false
+     */
     private function findFileWithExtension($class, $ext)
     {
         // PSR-4 lookup
@@ -464,14 +554,26 @@
 
         return false;
     }
-}
 
-/**
- * Scope isolated include.
- *
- * Prevents access to $this/self from included files.
- */
-function includeFile($file)
-{
-    include $file;
+    /**
+     * @return void
+     */
+    private static function initializeIncludeClosure()
+    {
+        if (self::$includeFile !== null) {
+            return;
+        }
+
+        /**
+         * Scope isolated include.
+         *
+         * Prevents access to $this/self from included files.
+         *
+         * @param  string $file
+         * @return void
+         */
+        self::$includeFile = \Closure::bind(static function($file) {
+            include $file;
+        }, null, null);
+    }
 }
diff -ruN old/vendor/composer/installed.json new/vendor/composer/installed.json
--- old/vendor/composer/installed.json	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/composer/installed.json	2025-01-04 18:03:14.000000000 +0000
@@ -2,23 +2,23 @@
     "packages": [
         {
             "name": "bcosca/fatfree",
-            "version": "3.8.2",
-            "version_normalized": "3.8.2.0",
+            "version": "3.9.0",
+            "version_normalized": "3.9.0.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/bcosca/fatfree.git",
-                "reference": "e55d7bedd2704f6e5c3501678fbea8788c7642b4"
+                "reference": "9563e848a403c8e932633f8daef7dda5b2f64ec6"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/bcosca/fatfree/zipball/e55d7bedd2704f6e5c3501678fbea8788c7642b4",
-                "reference": "e55d7bedd2704f6e5c3501678fbea8788c7642b4",
+                "url": "https://api.github.com/repos/bcosca/fatfree/zipball/9563e848a403c8e932633f8daef7dda5b2f64ec6",
+                "reference": "9563e848a403c8e932633f8daef7dda5b2f64ec6",
                 "shasum": ""
             },
             "require": {
                 "bcosca/fatfree-core": "^3.8"
             },
-            "time": "2023-07-23T22:23:04+00:00",
+            "time": "2024-12-29T16:02:38+00:00",
             "type": "project",
             "installation-source": "dist",
             "notification-url": "https://packagist.org/downloads/",
@@ -29,29 +29,29 @@
             "homepage": "http://fatfreeframework.com/",
             "support": {
                 "issues": "https://github.com/bcosca/fatfree/issues",
-                "source": "https://github.com/bcosca/fatfree/tree/3.8.2"
+                "source": "https://github.com/bcosca/fatfree/tree/3.9.0"
             },
             "install-path": "../bcosca/fatfree"
         },
         {
             "name": "bcosca/fatfree-core",
-            "version": "3.8.2",
-            "version_normalized": "3.8.2.0",
+            "version": "3.9.0",
+            "version_normalized": "3.9.0.0",
             "source": {
                 "type": "git",
                 "url": "https://github.com/f3-factory/fatfree-core.git",
-                "reference": "774692ce7698904d3cb35bbd4f79376bb17eeddc"
+                "reference": "227b3b03315ab86b1601d9e9fd8e07efbedf6ab9"
             },
             "dist": {
                 "type": "zip",
-                "url": "https://api.github.com/repos/f3-factory/fatfree-core/zipball/774692ce7698904d3cb35bbd4f79376bb17eeddc",
-                "reference": "774692ce7698904d3cb35bbd4f79376bb17eeddc",
+                "url": "https://api.github.com/repos/f3-factory/fatfree-core/zipball/227b3b03315ab86b1601d9e9fd8e07efbedf6ab9",
+                "reference": "227b3b03315ab86b1601d9e9fd8e07efbedf6ab9",
                 "shasum": ""
             },
             "require": {
-                "php": ">=5.4"
+                "php": ">=7.2"
             },
-            "time": "2023-07-23T22:11:30+00:00",
+            "time": "2024-12-31T17:11:04+00:00",
             "type": "library",
             "installation-source": "dist",
             "autoload": {
@@ -67,8 +67,18 @@
             "homepage": "http://fatfreeframework.com/",
             "support": {
                 "issues": "https://github.com/f3-factory/fatfree-core/issues",
-                "source": "https://github.com/f3-factory/fatfree-core/tree/3.8.2"
+                "source": "https://github.com/f3-factory/fatfree-core/tree/3.9.0"
             },
+            "funding": [
+                {
+                    "url": "https://www.buymeacoffee.com/ikkez",
+                    "type": "buy_me_a_coffee"
+                },
+                {
+                    "url": "https://github.com/ikkez",
+                    "type": "github"
+                }
+            ],
             "install-path": "../bcosca/fatfree-core"
         }
     ],
diff -ruN old/vendor/composer/installed.php new/vendor/composer/installed.php
--- old/vendor/composer/installed.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/composer/installed.php	2025-01-04 18:03:14.000000000 +0000
@@ -1,42 +1,41 @@
-<?php return array (
-  'root' => 
-  array (
-    'pretty_version' => 'dev-master',
-    'version' => 'dev-master',
-    'aliases' => 
-    array (
+<?php return array(
+    'root' => array(
+        'name' => '__root__',
+        'pretty_version' => 'dev-master',
+        'version' => 'dev-master',
+        'reference' => '46463f957850cfec8cb5c9bf4607a6027efc43da',
+        'type' => 'library',
+        'install_path' => __DIR__ . '/../../',
+        'aliases' => array(),
+        'dev' => true,
     ),
-    'reference' => 'cd817bd2131480937cb1ec02f4a2212f68476a26',
-    'name' => '__root__',
-  ),
-  'versions' => 
-  array (
-    '__root__' => 
-    array (
-      'pretty_version' => 'dev-master',
-      'version' => 'dev-master',
-      'aliases' => 
-      array (
-      ),
-      'reference' => 'cd817bd2131480937cb1ec02f4a2212f68476a26',
+    'versions' => array(
+        '__root__' => array(
+            'pretty_version' => 'dev-master',
+            'version' => 'dev-master',
+            'reference' => '46463f957850cfec8cb5c9bf4607a6027efc43da',
+            'type' => 'library',
+            'install_path' => __DIR__ . '/../../',
+            'aliases' => array(),
+            'dev_requirement' => false,
+        ),
+        'bcosca/fatfree' => array(
+            'pretty_version' => '3.9.0',
+            'version' => '3.9.0.0',
+            'reference' => '9563e848a403c8e932633f8daef7dda5b2f64ec6',
+            'type' => 'project',
+            'install_path' => __DIR__ . '/../bcosca/fatfree',
+            'aliases' => array(),
+            'dev_requirement' => false,
+        ),
+        'bcosca/fatfree-core' => array(
+            'pretty_version' => '3.9.0',
+            'version' => '3.9.0.0',
+            'reference' => '227b3b03315ab86b1601d9e9fd8e07efbedf6ab9',
+            'type' => 'library',
+            'install_path' => __DIR__ . '/../bcosca/fatfree-core',
+            'aliases' => array(),
+            'dev_requirement' => false,
+        ),
     ),
-    'bcosca/fatfree' => 
-    array (
-      'pretty_version' => '3.8.2',
-      'version' => '3.8.2.0',
-      'aliases' => 
-      array (
-      ),
-      'reference' => 'e55d7bedd2704f6e5c3501678fbea8788c7642b4',
-    ),
-    'bcosca/fatfree-core' => 
-    array (
-      'pretty_version' => '3.8.2',
-      'version' => '3.8.2.0',
-      'aliases' => 
-      array (
-      ),
-      'reference' => '774692ce7698904d3cb35bbd4f79376bb17eeddc',
-    ),
-  ),
 );
diff -ruN old/vendor/composer/InstalledVersions.php new/vendor/composer/InstalledVersions.php
--- old/vendor/composer/InstalledVersions.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/composer/InstalledVersions.php	2025-01-04 18:03:14.000000000 +0000
@@ -18,53 +18,29 @@
 /**
  * This class is copied in every Composer installed project and available to all
  *
- * To require it's presence, you can require `composer-runtime-api ^2.0`
+ * See also https://getcomposer.org/doc/07-runtime.md#installed-versions
+ *
+ * To require its presence, you can require `composer-runtime-api ^2.0`
+ *
+ * @final
  */
 class InstalledVersions
 {
-    private static $installed = array (
-  'root' => 
-  array (
-    'pretty_version' => 'dev-master',
-    'version' => 'dev-master',
-    'aliases' => 
-    array (
-    ),
-    'reference' => 'cd817bd2131480937cb1ec02f4a2212f68476a26',
-    'name' => '__root__',
-  ),
-  'versions' => 
-  array (
-    '__root__' => 
-    array (
-      'pretty_version' => 'dev-master',
-      'version' => 'dev-master',
-      'aliases' => 
-      array (
-      ),
-      'reference' => 'cd817bd2131480937cb1ec02f4a2212f68476a26',
-    ),
-    'bcosca/fatfree' => 
-    array (
-      'pretty_version' => '3.8.2',
-      'version' => '3.8.2.0',
-      'aliases' => 
-      array (
-      ),
-      'reference' => 'e55d7bedd2704f6e5c3501678fbea8788c7642b4',
-    ),
-    'bcosca/fatfree-core' => 
-    array (
-      'pretty_version' => '3.8.2',
-      'version' => '3.8.2.0',
-      'aliases' => 
-      array (
-      ),
-      'reference' => '774692ce7698904d3cb35bbd4f79376bb17eeddc',
-    ),
-  ),
-);
+    /**
+     * @var mixed[]|null
+     * @psalm-var array{root: array{name: string, pretty_version: string, version: string, reference: string|null, type: string, install_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty_version?: string, version?: string, reference?: string|null, type?: string, install_path?: string, aliases?: string[], dev_requirement: bool, replaced?: string[], provided?: string[]}>}|array{}|null
+     */
+    private static $installed;
+
+    /**
+     * @var bool|null
+     */
     private static $canGetVendors;
+
+    /**
+     * @var array[]
+     * @psalm-var array<string, array{root: array{name: string, pretty_version: string, version: string, reference: string|null, type: string, install_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty_version?: string, version?: string, reference?: string|null, type?: string, install_path?: string, aliases?: string[], dev_requirement: bool, replaced?: string[], provided?: string[]}>}>
+     */
     private static $installedByVendor = array();
 
     /**
@@ -80,7 +56,6 @@
             $packages[] = array_keys($installed['versions']);
         }
 
-
         if (1 === \count($packages)) {
             return $packages[0];
         }
@@ -89,18 +64,41 @@
     }
 
     /**
+     * Returns a list of all package names with a specific type e.g. 'library'
+     *
+     * @param  string   $type
+     * @return string[]
+     * @psalm-return list<string>
+     */
+    public static function getInstalledPackagesByType($type)
+    {
+        $packagesByType = array();
+
+        foreach (self::getInstalled() as $installed) {
+            foreach ($installed['versions'] as $name => $package) {
+                if (isset($package['type']) && $package['type'] === $type) {
+                    $packagesByType[] = $name;
+                }
+            }
+        }
+
+        return $packagesByType;
+    }
+
+    /**
      * Checks whether the given package is installed
      *
      * This also returns true if the package name is provided or replaced by another package
      *
      * @param  string $packageName
+     * @param  bool   $includeDevRequirements
      * @return bool
      */
-    public static function isInstalled($packageName)
+    public static function isInstalled($packageName, $includeDevRequirements = true)
     {
         foreach (self::getInstalled() as $installed) {
             if (isset($installed['versions'][$packageName])) {
-                return true;
+                return $includeDevRequirements || !isset($installed['versions'][$packageName]['dev_requirement']) || $installed['versions'][$packageName]['dev_requirement'] === false;
             }
         }
 
@@ -114,15 +112,14 @@
      *
      *   Composer\InstalledVersions::satisfies(new VersionParser, 'foo/bar', '^2.3')
      *
-     * @param VersionParser $parser      Install composer/semver to have access to this class and functionality
-     * @param string        $packageName
-     * @param string|null   $constraint  A version constraint to check for, if you pass one you have to make sure composer/semver is required by your package
-     *
+     * @param  VersionParser $parser      Install composer/semver to have access to this class and functionality
+     * @param  string        $packageName
+     * @param  string|null   $constraint  A version constraint to check for, if you pass one you have to make sure composer/semver is required by your package
      * @return bool
      */
     public static function satisfies(VersionParser $parser, $packageName, $constraint)
     {
-        $constraint = $parser->parseConstraints($constraint);
+        $constraint = $parser->parseConstraints((string) $constraint);
         $provided = $parser->parseConstraints(self::getVersionRanges($packageName));
 
         return $provided->matches($constraint);
@@ -228,8 +225,25 @@
     }
 
     /**
+     * @param  string      $packageName
+     * @return string|null If the package is being replaced or provided but is not really installed, null will be returned as install path. Packages of type metapackages also have a null install path.
+     */
+    public static function getInstallPath($packageName)
+    {
+        foreach (self::getInstalled() as $installed) {
+            if (!isset($installed['versions'][$packageName])) {
+                continue;
+            }
+
+            return isset($installed['versions'][$packageName]['install_path']) ? $installed['versions'][$packageName]['install_path'] : null;
+        }
+
+        throw new \OutOfBoundsException('Package "' . $packageName . '" is not installed');
+    }
+
+    /**
      * @return array
-     * @psalm-return array{name: string, version: string, reference: string, pretty_version: string, aliases: string[]}
+     * @psalm-return array{name: string, pretty_version: string, version: string, reference: string|null, type: string, install_path: string, aliases: string[], dev: bool}
      */
     public static function getRootPackage()
     {
@@ -241,15 +255,39 @@
     /**
      * Returns the raw installed.php data for custom implementations
      *
+     * @deprecated Use getAllRawData() instead which returns all datasets for all autoloaders present in the process. getRawData only returns the first dataset loaded, which may not be what you expect.
      * @return array[]
-     * @psalm-return array{root: array{name: string, version: string, reference: string, pretty_version: string, aliases: string[]}, versions: list<string, array{pretty_version: ?string, version: ?string, aliases: ?string[], reference: ?string, replaced: ?string[], provided: ?string[]}>}
+     * @psalm-return array{root: array{name: string, pretty_version: string, version: string, reference: string|null, type: string, install_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty_version?: string, version?: string, reference?: string|null, type?: string, install_path?: string, aliases?: string[], dev_requirement: bool, replaced?: string[], provided?: string[]}>}
      */
     public static function getRawData()
     {
+        @trigger_error('getRawData only returns the first dataset loaded, which may not be what you expect. Use getAllRawData() instead which returns all datasets for all autoloaders present in the process.', E_USER_DEPRECATED);
+
+        if (null === self::$installed) {
+            // only require the installed.php file if this file is loaded from its dumped location,
+            // and not from its source location in the composer/composer package, see https://github.com/composer/composer/issues/9937
+            if (substr(__DIR__, -8, 1) !== 'C' && is_file(__DIR__ . '/installed.php')) {
+                self::$installed = include __DIR__ . '/installed.php';
+            } else {
+                self::$installed = array();
+            }
+        }
+
         return self::$installed;
     }
 
     /**
+     * Returns the raw data of all installed.php which are currently loaded for custom implementations
+     *
+     * @return array[]
+     * @psalm-return list<array{root: array{name: string, pretty_version: string, version: string, reference: string|null, type: string, install_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty_version?: string, version?: string, reference?: string|null, type?: string, install_path?: string, aliases?: string[], dev_requirement: bool, replaced?: string[], provided?: string[]}>}>
+     */
+    public static function getAllRawData()
+    {
+        return self::getInstalled();
+    }
+
+    /**
      * Lets you reload the static array from another file
      *
      * This is only useful for complex integrations in which a project needs to use
@@ -265,7 +303,7 @@
      * @param  array[] $data A vendor/composer/installed.php data set
      * @return void
      *
-     * @psalm-param array{root: array{name: string, version: string, reference: string, pretty_version: string, aliases: string[]}, versions: list<string, array{pretty_version: ?string, version: ?string, aliases: ?string[], reference: ?string, replaced: ?string[], provided: ?string[]}>} $data
+     * @psalm-param array{root: array{name: string, pretty_version: string, version: string, reference: string|null, type: string, install_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty_version?: string, version?: string, reference?: string|null, type?: string, install_path?: string, aliases?: string[], dev_requirement: bool, replaced?: string[], provided?: string[]}>} $data
      */
     public static function reload($data)
     {
@@ -275,6 +313,7 @@
 
     /**
      * @return array[]
+     * @psalm-return list<array{root: array{name: string, pretty_version: string, version: string, reference: string|null, type: string, install_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty_version?: string, version?: string, reference?: string|null, type?: string, install_path?: string, aliases?: string[], dev_requirement: bool, replaced?: string[], provided?: string[]}>}>
      */
     private static function getInstalled()
     {
@@ -285,17 +324,35 @@
         $installed = array();
 
         if (self::$canGetVendors) {
-            // @phpstan-ignore-next-line
             foreach (ClassLoader::getRegisteredLoaders() as $vendorDir => $loader) {
                 if (isset(self::$installedByVendor[$vendorDir])) {
                     $installed[] = self::$installedByVendor[$vendorDir];
                 } elseif (is_file($vendorDir.'/composer/installed.php')) {
-                    $installed[] = self::$installedByVendor[$vendorDir] = require $vendorDir.'/composer/installed.php';
+                    /** @var array{root: array{name: string, pretty_version: string, version: string, reference: string|null, type: string, install_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty_version?: string, version?: string, reference?: string|null, type?: string, install_path?: string, aliases?: string[], dev_requirement: bool, replaced?: string[], provided?: string[]}>} $required */
+                    $required = require $vendorDir.'/composer/installed.php';
+                    $installed[] = self::$installedByVendor[$vendorDir] = $required;
+                    if (null === self::$installed && strtr($vendorDir.'/composer', '\\', '/') === strtr(__DIR__, '\\', '/')) {
+                        self::$installed = $installed[count($installed) - 1];
+                    }
                 }
             }
         }
 
-        $installed[] = self::$installed;
+        if (null === self::$installed) {
+            // only require the installed.php file if this file is loaded from its dumped location,
+            // and not from its source location in the composer/composer package, see https://github.com/composer/composer/issues/9937
+            if (substr(__DIR__, -8, 1) !== 'C' && is_file(__DIR__ . '/installed.php')) {
+                /** @var array{root: array{name: string, pretty_version: string, version: string, reference: string|null, type: string, install_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty_version?: string, version?: string, reference?: string|null, type?: string, install_path?: string, aliases?: string[], dev_requirement: bool, replaced?: string[], provided?: string[]}>} $required */
+                $required = require __DIR__ . '/installed.php';
+                self::$installed = $required;
+            } else {
+                self::$installed = array();
+            }
+        }
+
+        if (self::$installed !== array()) {
+            $installed[] = self::$installed;
+        }
 
         return $installed;
     }
diff -ruN old/vendor/composer/platform_check.php new/vendor/composer/platform_check.php
--- old/vendor/composer/platform_check.php	2024-12-02 15:16:21.000000000 +0000
+++ new/vendor/composer/platform_check.php	2025-01-04 18:03:14.000000000 +0000
@@ -4,8 +4,8 @@
 
 $issues = array();
 
-if (!(PHP_VERSION_ID >= 50400)) {
-    $issues[] = 'Your Composer dependencies require a PHP version ">= 5.4.0". You are running ' . PHP_VERSION . '.';
+if (!(PHP_VERSION_ID >= 70200)) {
+    $issues[] = 'Your Composer dependencies require a PHP version ">= 7.2.0". You are running ' . PHP_VERSION . '.';
 }
 
 if ($issues) {
diff -ruN old/VERSION new/VERSION
--- old/VERSION	2024-12-02 15:16:24.000000000 +0000
+++ new/VERSION	2025-01-04 18:01:18.000000000 +0000
@@ -1 +1 @@
-0.6n
+0.6o
diff -ruN old/view/Admin/admin_index.htm new/view/Admin/admin_index.htm
--- old/view/Admin/admin_index.htm	2024-12-02 15:16:22.000000000 +0000
+++ new/view/Admin/admin_index.htm	2025-01-04 17:59:18.000000000 +0000
@@ -23,7 +23,7 @@
 <div class="well">
 <h3>Daily Rob</h3>
 <div style="text-align: center">
-<img src="http://robpress.clicked.cc/rob.jpg" style="max-height: 150px; width: auto;"/>
+<img src="http://admin.robpress.ecs.soton.ac.uk/img/rob.jpg" style="max-height: 150px; width: auto;"/>
 </div>
 </div>
 </div>
diff -ruN old/view/Errorer/errorer.htm new/view/Errorer/errorer.htm
--- old/view/Errorer/errorer.htm	2024-12-02 15:16:22.000000000 +0000
+++ new/view/Errorer/errorer.htm	2025-01-04 18:01:36.000000000 +0000
@@ -5,7 +5,7 @@
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1">
     <meta name="description" content="">
-    <meta name="generator" content="RobPress 0.6n - http://robpress.clicked.cc">
+    <meta name="generator" content="RobPress 0.6o">
     <?if($site['debug']):?>
     <meta name="debug" content="Debug mode is enabled"/>
     <?endif?>
diff -ruN old/view/header.htm new/view/header.htm
--- old/view/header.htm	2024-12-02 15:16:22.000000000 +0000
+++ new/view/header.htm	2025-01-04 18:01:12.000000000 +0000
@@ -5,7 +5,7 @@
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1">
     <meta name="description" content="">
-    <meta name="generator" content="RobPress 0.6n - http://robpress.clicked.cc">
+    <meta name="generator" content="RobPress 0.6o">
     <?if($site['debug']):?>
     <meta name="debug" content="Debug mode is enabled"/>
     <?endif?>